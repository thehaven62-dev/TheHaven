<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>THE HAVENS | Smoothies</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
  body { font-family:'Inter', sans-serif; background:#fff; color:#000; display:flex; flex-direction:column; min-height:100vh; line-height:1.6; }

  a { text-decoration:none; color:inherit; }
  button { cursor:pointer; border:none; outline:none; }

  header { position:fixed; top:0; width:100%; padding:1rem 2rem; background:#fff; display:flex; justify-content:space-between; align-items:center; box-shadow:0 2px 10px rgba(0,0,0,0.05); z-index:100; }
  .site-name { font-weight:700; font-size:1.4rem; letter-spacing:1px; }
  nav.desktop { display:flex; gap:1.5rem; }
  nav.desktop a { font-weight:600; transition:color 0.3s; }
  nav.desktop a:hover { color:#555; }
  .hamburger { display:none; flex-direction:column; gap:4px; cursor:pointer; }
  .hamburger div { width:25px; height:3px; background:#000; transition:0.3s; }
  .hamburger.active div:nth-child(1){ transform:rotate(45deg) translate(5px,5px); }
  .hamburger.active div:nth-child(2){ opacity:0; }
  .hamburger.active div:nth-child(3){ transform:rotate(-45deg) translate(5px,-5px); }
  nav.mobile { display:none; flex-direction:column; position:absolute; top:70px; right:2rem; background:#111; color:#fff; padding:1.5rem 2rem; border-radius:8px; box-shadow:0 4px 20px rgba(0,0,0,0.5); opacity:0; pointer-events:none; transition:all 0.3s ease; }
  nav.mobile.show { display:flex; opacity:1; pointer-events:auto; }
  nav.mobile a { margin:1rem 0; font-weight:600; color:#fff; transition:color 0.3s; }
  nav.mobile a:hover { color:#ffdd57; }

  .hero { display:flex; flex-direction:column; justify-content:center; align-items:center; height:100vh; text-align:center; padding:120px 2rem 2rem; background:linear-gradient(135deg,#FFDEE9,#B5FFFC); transition:all 0.3s; }
  .hero img { width:180px; max-width:50%; margin-bottom:1rem; }
  .hero h1 { font-size:2.5rem; font-weight:700; line-height:1.2; }
  .hero p { font-size:1.2rem; margin:0.5rem 0 2rem; color:#333; }
  .cta-button { padding:0.75rem 2rem; background:#000; color:#fff; border-radius:8px; font-weight:600; transition:0.3s; }
  .cta-button:hover { background:#333; transform:scale(1.05); }

  .section-title { font-size:1.8rem; font-weight:700; margin:2rem 1.5rem 1rem; color:#222; border-left:4px solid #FF5757; padding-left:0.5rem; }

  /* Horizontal Scroll Sections */
  .products-section-container { position:relative; }
  .scroll-btn { position:absolute; top:50%; transform:translateY(-50%); background:#000; color:#fff; border-radius:50%; width:35px; height:35px; display:flex; justify-content:center; align-items:center; cursor:pointer; opacity:0.7; transition:0.3s; z-index:50; }
  .scroll-btn:hover { opacity:1; }
  .scroll-left { left:5px; }
  .scroll-right { right:5px; }

  .products-section { display:flex; flex-wrap: nowrap; overflow-x: auto; gap:1rem; padding:1rem 1.5rem; scroll-snap-type:x mandatory; -webkit-overflow-scrolling:touch; scroll-behavior:smooth; }
  .products-section::-webkit-scrollbar{ display:none; }

  /* Flip Card Styles */
.product-card {
  flex: 0 0 250px;
  scroll-snap-align: start;
  perspective: 1000px;
  cursor: pointer;
}

.product-card-inner {
  position: relative;
  width: 100%;
  min-height: 450px;
  border-radius: 12px;
  transition: transform 0.6s;
  transform-style: preserve-3d;
}

.product-card.flipped .product-card-inner {
  transform: rotateY(180deg);
}

.product-card-front,
.product-card-back {
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
  width: 100%;
  backface-visibility: hidden;
  border-radius: 12px;
  overflow: hidden;
  padding: 1rem;
  text-align: center;
  box-shadow: 0 4px 15px rgba(0,0,0,0.05);
}

.product-card-front {
  background: #f9f9f9;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.product-card-front img {
  width: 100%;
  aspect-ratio: 1/1;
  object-fit: cover;
  border-radius: 12px;
  margin-bottom: 1rem;
  transition: transform 0.3s;
}

.product-card-front img:hover {
  transform: scale(1.05);
}

.product-card-front h3 {
  font-weight: 600;
  margin-bottom: 0.5rem;
  font-size: 1.1rem;
}

.product-card-front p.price {
  margin-bottom: 1rem;
  color: #555;
  font-size: 1rem;
}

.btn-add {
  padding: 0.5rem 1.2rem;
  background: #000;
  color: #fff;
  border-radius: 6px;
  transition: 0.3s;
}

.btn-add:hover {
  background: #333;
  transform: scale(1.05);
}

.product-card-back {
  background: #333;
  color: #fff;
  transform: rotateY(180deg);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  font-size: 0.9rem;
  line-height: 1.4;
  text-align: center;
  padding: 1.5rem;
}

.product-card-back h3 {
  margin-bottom: 0.5rem;
}

/* Cart Drawer */
#cartDrawer { position:fixed; top:0; right:-100%; width:90%; max-width:360px; height:100%; background:#111; color:#fff; z-index:200; padding:2rem 1.5rem; display:flex; flex-direction:column; box-shadow:-4px 0 20px rgba(0,0,0,0.5); transition:right 0.3s ease; overflow-y:auto; }
#cartDrawer.show { right:0; }
#cartDrawer h2 { margin-bottom:1rem; font-size:1.5rem; }
#cartDrawer .cart-items { flex-grow:1; overflow-y:auto; margin-bottom:1rem; }
.btn { border:none; border-radius:6px; padding:0.5rem 1rem; font-weight:600; cursor:pointer; }
.btn-close { background:#333; color:#fff; margin-bottom:1rem; width:100%; }
.btn-checkout { background:#fff; color:#000; margin-top:1rem; width:100%; }

#cartButton { position:fixed; bottom:1rem; right:1rem; width:55px; height:55px; background:#000; color:#fff; border-radius:50%; display:flex; justify-content:center; align-items:center; font-size:1.2rem; box-shadow:0 4px 15px rgba(0,0,0,0.2); z-index:150; }
#cartCount { position:absolute; top:-5px; right:-5px; width:18px; height:18px; border-radius:50%; background:red; color:#fff; font-size:0.8rem; display:flex; justify-content:center; align-items:center; }

footer { margin-top:auto; padding:2rem; text-align:center; font-size:0.9rem; border-top:1px solid #e0e0e0; }
footer a { font-weight:600; transition:0.3s; }
footer a:hover { text-decoration:underline; }

@media(max-width:768px){ nav.desktop{display:none;} .hamburger{display:flex;} }
@media(max-width:600px){
  .hero {padding:100px 1rem 2rem;}
  .hero h1{font-size:2rem;}
  .hero p{font-size:1rem;}
  .product-card {flex:0 0 80%; }
  .product-card h3{font-size:1rem;}
  .product-card p.price{font-size:0.9rem;}
  #cartDrawer {padding:1.5rem;}
}
@media(max-width:400px){
  .hero h1{font-size:1.6rem;} 
  .hero p{font-size:0.9rem;}
  #cartButton { width:50px; height:50px; font-size:1rem; }
}
</style>
</head>
<body>

<header>
  <div class="site-name">THE HAVENS</div>
  <nav class="desktop">
    <a href="#">Home</a><a href="#">Shop</a><a href="#">About</a><a href="#">Contact</a>
  </nav>
  <div class="hamburger" id="hamburger" aria-label="Toggle menu" aria-expanded="false"><div></div><div></div><div></div></div>
  <nav class="mobile" id="mobileMenu" aria-hidden="true">
    <a href="#">Home</a><a href="#">Shop</a><a href="#">About</a><a href="#">Contact</a>
  </nav>
</header>

<section class="hero">
  <img src="assets/logo.svg" alt="THE HAVENS Logo">
  <h1>THE HAVENS</h1>
  <p>Where appetites are fed.</p>
  <button class="cta-button" onclick="document.getElementById('smoothies-container').scrollIntoView({behavior:'smooth'})">Shop Now</button>
</section>

<h2 class="section-title">Signature Smoothies</h2>
<div class="products-section-container">
  <div class="scroll-btn scroll-left" onclick="scrollSection('smoothies-container', -250)">&#8249;</div>
  <section class="products-section" id="smoothies-container"></section>
  <div class="scroll-btn scroll-right" onclick="scrollSection('smoothies-container', 250)">&#8250;</div>
</div>

<h2 class="section-title">Snacks & Beverages</h2>
<div class="products-section-container">
  <div class="scroll-btn scroll-left" onclick="scrollSection('others-container', -250)">&#8249;</div>
  <section class="products-section" id="others-container"></section>
  <div class="scroll-btn scroll-right" onclick="scrollSection('others-container', 250)">&#8250;</div>
</div>

<div id="cartDrawer">
  <button class="btn btn-close" onclick="closeCart()">Close</button>
  <h2>Your Cart</h2>
  <div class="cart-items" id="cartItems"></div>
  <p id="cartTotal" style="font-weight:600; margin-top:1rem;">Total: R0</p>
  <p style="font-weight:600; margin-top:1rem;">Pay to Account: 10256356384 Standard Bank</p>
  <button class="btn btn-checkout" onclick="showCheckoutForm()">Checkout</button>

  <form id="checkoutForm" action="https://formspree.io/f/mkgzdyeq" method="POST" style="display:none; margin-top:1rem;">
    <label for="custName">Your Name</label>
    <input type="text" id="custName" name="name" required>
    <label for="custEmail">Your Email</label>
    <input type="email" id="custEmail" name="email" required>
    <label for="orderDetails">Order Details</label>
    <textarea id="orderDetails" name="orderDetails" readonly></textarea>
    <label for="paymentRef">Payment Reference</label>
    <input type="text" id="paymentRef" name="paymentRef" placeholder="Enter your payment reference" required>
    <button type="submit" class="btn" style="background:green; color:#fff; width:100%; margin-top:5px;">Send Order</button>
    <p id="successMsg" style="display:none; margin-top:10px; color:lightgreen;">âœ… Order sent! We'll confirm soon.</p>
  </form>
</div>

<button id="cartButton" aria-label="Open Cart">ðŸ›’<span id="cartCount">0</span></button>

<footer>
  <p>&copy; 2025 THE HAVENS. All rights reserved.</p>
  <p>Developed by <strong><a href="https://blvckaesthetix.online" target="_blank">BlvckAesthetix</a></strong></p>
</footer>

<script>
/* Hamburger Toggle */
const hamburger = document.getElementById('hamburger');
const mobileMenu = document.getElementById('mobileMenu');
hamburger.addEventListener('click', () => {
  hamburger.classList.toggle('active');
  mobileMenu.classList.toggle('show');
  const expanded = hamburger.getAttribute('aria-expanded') === 'true';
  hamburger.setAttribute('aria-expanded', !expanded);
  mobileMenu.setAttribute('aria-hidden', expanded);
});

/* Cart Logic */
const cartDrawer = document.getElementById('cartDrawer');
const cartButton = document.getElementById('cartButton');
const cartItemsContainer = document.getElementById('cartItems');
const cartTotalEl = document.getElementById('cartTotal');
const cartCountEl = document.getElementById('cartCount');
let cart = JSON.parse(localStorage.getItem('cart')) || [];

const updateCartCount = () => { cartCountEl.innerText = cart.length; }
const openCart = () => { renderCart(); cartDrawer.classList.add('show'); }
const closeCart = () => { cartDrawer.classList.remove('show'); }
cartButton.addEventListener('click', openCart);

function renderCart() {
  const products = JSON.parse(localStorage.getItem('productsData'))||[];
  let html='', total=0;
  if(!cart.length){ html='<p>Your cart is empty.</p>'; }
  else{
    cart.forEach(id=>{
      const product = products.find(p=>p.id===id);
      if(product){
        html+=`<div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:0.5rem;">
                 <span>${product.name} - R${product.price}</span>
                 <button onclick="removeFromCart(${product.id})" class="btn" style="background:red;color:#fff;">X</button>
               </div>`;
        total+=Number(product.price);
      }
    });
  }
  cartItemsContainer.innerHTML = html;
  cartTotalEl.innerText = `Total: R${total.toFixed(2)}`;
  updateCartCount();
}

function addToCart(id){ cart.push(id); localStorage.setItem('cart',JSON.stringify(cart)); renderCart(); alert('Product added!'); }
function removeFromCart(id){ cart = cart.filter(x=>x!==id); localStorage.setItem('cart',JSON.stringify(cart)); renderCart(); }

/* Scroll Buttons */
function scrollSection(containerId, distance){
  document.getElementById(containerId).scrollBy({ left: distance, behavior: 'smooth' });
}

/* Load Products */
const smoothies = [
  {id:1, name:'Breakfast Zing', price:35, image:'assets/mango.jpg', ingredients:['Papaya','Orange','Lemon','Flakes','Water','Sugar']},
  {id:2, name:'Berry Boom', price:40, image:'assets/berry.jpg', ingredients:['Strawberry','Blueberry','Cream','Almond Milk','Sugar']},
  {id:3, name:'Crunch Mode Activated (CMA)', price:38, image:'assets/green.jpg', ingredients:['Banana','Apple','Almond Milk','Flakes','Sugar','Papaya']},
  {id:4, name:'Fruitastic', price:35, image:'assets/fruitastic.jpg', ingredients:['Banana','Apple','Milk','Flakes','Sugar']},
  {id:5, name:'Mix Masters', price:37, image:'assets/mixmasters.jpg', ingredients:['Lemon','Orange','Grapefruit','Ginger','Pineapple','Banana','Water']},
  {id:6, name:'Mixed Emotions', price:42, image:'assets/mixedemotions.jpg', ingredients:['Banana','Berry Mix','Apple','Pear']},
  {id:7, name:'Tropical Sunrise Blend', price:40, image:'assets/tropical.jpg', ingredients:['Pineapple','Mango','Coconut Water','Citrus']}
];

const others = [
  {id:101, name:'Wraps', price:25, image:'assets/wraps.jpg', ingredients:['Tortilla','Chicken','Lettuce','Cheese']},
  {id:102, name:'Chips', price:15, image:'assets/chips.jpg', ingredients:['Potatoes','Salt','Oil']},
  {id:103, name:'Wings', price:45, image:'assets/wings.jpg', ingredients:['Chicken Wings','Spices','BBQ Sauce']},
  {id:104, name:'Pap & Meat', price:50, image:'assets/papmeat.jpg', ingredients:['Maize Meal','Beef','Tomato Sauce']},
  {id:105, name:'Sides', price:20, image:'assets/sides.jpg', ingredients:['Mixed Veggies','Sauces']},
  {id:106, name:'Mojito', price:30, image:'assets/mojito.jpg', ingredients:['Mint','Lime','Sugar','Soda Water']},
  {id:107, name:'Iced Tea', price:25, image:'assets/icedtea.jpg', ingredients:['Tea','Sugar','Lemon']}
];

localStorage.setItem('productsData', JSON.stringify([...smoothies,...others]));

function renderProducts(products, containerId) {
  const container = document.getElementById(containerId);
  container.innerHTML = '';
  products.forEach(p => {
    const card = document.createElement('div');
    card.className='product-card';
    card.innerHTML = `
      <div class="product-card-inner">
        <div class="product-card-front">
          <img src="${p.image}" alt="${p.name}" loading="lazy">
          <h3>${p.name}</h3>
          <p class="price">R${p.price}</p>
          <button class="btn-add" onclick="event.stopPropagation(); addToCart(${p.id})">Add to Cart</button>
        </div>
        <div class="product-card-back">
          <h3>Ingredients</h3>
          <p>${p.ingredients.join(', ')}</p>
        </div>
      </div>`;
    card.addEventListener('click', ()=>card.classList.toggle('flipped'));
    container.appendChild(card);
  });
}

renderProducts(smoothies,'smoothies-container');
renderProducts(others,'others-container');
updateCartCount();

/* Checkout Form */
function showCheckoutForm() {
  const form = document.getElementById("checkoutForm");
  form.style.display = "block";
  const products = JSON.parse(localStorage.getItem("productsData")) || [];
  const cartData = JSON.parse(localStorage.getItem("cart")) || [];
  const summary = cartData.map(id => {
    const p = products.find(prod => prod.id === id);
    return p ? `${p.name} - R${p.price}` : null;
  }).filter(Boolean).join("\n");
  const total = cartData.reduce((sum, id) => {
    const p = products.find(prod => prod.id === id);
    return sum + (p ? p.price : 0);
  }, 0);
  document.getElementById("orderDetails").value = summary + `\nTotal: R${total}`;
}

document.getElementById("checkoutForm").addEventListener("submit", function(e) {
  e.preventDefault();
  const form = e.target;
  const formData = new FormData(form);
  fetch(form.action, { method: "POST", body: formData, headers: { Accept: "application/json" } })
  .then(response => {
    if (response.ok) {
      document.getElementById("successMsg").style.display = "block";
      localStorage.removeItem("cart");
      cart = [];
      renderCart();
      setTimeout(() => {
        closeCart();
        form.reset();
        form.style.display = "none";
        document.getElementById("successMsg").style.display = "none";
      }, 2000);
    } else { alert("Error sending order. Try again."); }
  })
  .catch(() => alert("Network error. Please try again."));
});
</script>
</body>
</html>

